# 4. æµç¨‹è‡ªåŠ¨åŒ–

å‰ç«¯ä»è¯ç”Ÿä¾èµ–å¯ä»¥è¯´ç»å†äº†ä¸€ä¸ªä»ä¸è§„èŒƒåˆ°è§„èŒƒï¼Œå†åˆ°è‡ªåŠ¨åŒ–çš„ä¸€ç³»åˆ—è¿‡ç¨‹ã€‚æœ€å¼€å§‹çš„æ—¶å€™æ²¡æœ‰å‰ç«¯è¿™ä¸ªé¢†åŸŸï¼Œæ‰€æœ‰çš„å‰ç«¯èŒè´£éƒ½æ˜¯ç”±æœåŠ¡ç«¯æ¥ä»£æ›¿å®Œæˆï¼Œå½“æ—¶çš„çŠ¶å†µæ˜¯éå¸¸æ··ä¹±çš„ï¼Œæ´¾åˆ«ä¸›ç”Ÿï¼Œæµè§ˆå™¨å‚å•†è§„èŒƒä¸ç»Ÿä¸€ï¼Œæ¨¡å—æœºåˆ¶æ··ä¹±ï¼Œä»£ç é£æ ¼å†™æ³•å„è‡ªä¸ºæ´¾ï¼ŒçœŸæœ‰ç‚¹ç¾¤é›„é€é¹¿çš„æ„Ÿè§‰ã€‚ä»HTML5ï¼ŒCSS3ï¼ŒES6ï¼ˆ536ï¼‰çš„å‘å¸ƒå¼€å§‹ï¼Œå‰ç«¯å·²ç»è¶‹äºè§„èŒƒåŒ–ã€‚æµè§ˆå™¨çš„è§„èŒƒè¶‹å‘ä¸€è‡´ï¼Œå¾®è½¯çš„æµè§ˆå™¨ä¹Ÿé€æ¸è·Ÿä¸Šäº†æ­¥ä¼ï¼Œæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜å‘å‰è¿ˆè¿›äº†ä¸€å¤§æ­¥ã€‚å¦‚ä»Šå‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¹Ÿè¶Šæ¥è¶Šè§„èŒƒï¼Œè¶Šæ¥è¶Šæœ‰è§„å¾‹å¯å¾ªã€‚å› æ­¤å¤§å®¶åœ¨æƒ³è¿™äº›æœ‰è§„å¾‹çš„ä¸œè¥¿èƒ½ä¸èƒ½å¤Ÿå®ç°è‡ªåŠ¨åŒ–ï¼ˆç¨‹åºå‘˜æœ€å–œæ¬¢å·æ‡’ï¼‰ï¼Œèƒ½ä¸èƒ½å°†æ¯ç‡¥æ— å‘³çš„å·¥ä½œäº¤ç»™ç”µè„‘æ¥åšï¼Œå‡å°‘é‡å¤çš„å·¥ä½œï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚ ç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œè€Œä¸”ç›®å‰ä¸šå†…å·²ç»æœ‰éå¸¸å¤šçš„æˆåŠŸæ¡ˆä¾‹ã€‚ä»facebookçš„Waitirï¼Œgoogleçš„è‡ªåŠ¨åŒ–æµç¨‹ç³»ç»Ÿï¼Œåˆ°å›½å†…é˜¿é‡Œçš„defï¼Œå†åˆ°å°å…¬å¸ä½¿ç”¨çš„gitlab ciï¼Œå‘ç°å¾ˆå¤šå…¬å¸éƒ½å·²ç»å¼€å§‹äº†æµç¨‹è‡ªåŠ¨åŒ–çš„æ¢ç´¢ã€‚æœ¬ç« æˆ‘ä¼šå…ˆè®²è¿°å‰ç«¯çš„å·¥ä½œæµç¨‹æ˜¯æ€æ ·çš„ï¼Œç„¶åå¯¹å‰ç«¯å·¥ä½œæµç¨‹è¿›è¡Œåˆ†æï¼Œåˆ†æå“ªäº›ä»»åŠ¡å¯ä»¥è‡ªåŠ¨åŒ–ï¼Œå®ç°è‡ªåŠ¨åŒ–çš„æ€è·¯æ˜¯ä»€ä¹ˆï¼Œæœ€åæˆ‘ä¼šè®²è¿°å¦‚ä½•æ­å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–çš„å°å¹³å°ã€‚

## å‰ç«¯å·¥ä½œæµç¨‹

è®©æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬ç›®å‰å‰ç«¯çš„å·¥ä½œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œæˆ‘åˆ†äº«çš„åªæ˜¯æˆ‘ä¸ªäººçš„å·¥ä½œæµç¨‹ï¼Œä¸åŒå…¬å¸å’Œä¸ªäººå¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä½†æ€»çš„æ€è·¯åº”è¯¥æ˜¯å·®ä¸å¤šçš„ï¼Œè¯·ä¸è¦å¤ªä»‹æ„ã€‚

### é˜¶æ®µä¸€ éœ€æ±‚äº§ç”Ÿ - å‡†å¤‡å¼€å‘

è¿™ä¸ªé˜¶æ®µåˆå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸‰ä¸ªå°é˜¶æ®µï¼š

#### éœ€æ±‚è¯„å®¡

æ­£å¸¸æƒ…å†µä¸‹ï¼Œä»éœ€æ±‚äº§ç”Ÿåˆ°å‡†å¤‡å¼€å‘ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªéœ€æ±‚è¯„å®¡ä¼šï¼Œè¿™æ—¶å€™ç›¸å…³å¼€å‘å’Œäº§å“ç»ç†ä¼šèšé›†åœ¨ä¸€èµ·ï¼Œå•†è®¨éœ€æ±‚æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼ˆæ•æ·å¼€å‘çš„éœ€æ±‚é€šå¸¸æ˜¯ä»å®¢æˆ·çš„åé¦ˆä¸­äº§ç”Ÿçš„ï¼‰ï¼Œæˆ‘ä»¬åšçš„åŠŸèƒ½æœ‰æ²¡æœ‰è§£å†³å®¢æˆ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹éœ€æ±‚çš„ç†è§£æœ‰æ²¡æœ‰åå·®å’Œéœ€æ±‚çš„ä¼˜å…ˆçº§ç­‰ã€‚ç»è¿‡å½»åº•å……åˆ†çš„è®¨è®ºä¹‹åï¼Œå¦‚æœéœ€æ±‚ç†è§£æ²¡æœ‰é—®é¢˜ï¼Œå¹¶ä¸”éœ€æ±‚ç¡®å®å¯ä»¥è§£å†³å®¢æˆ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šä¸ºå·¥ä½œå®‰æ’æ—¶é—´å’Œä¼˜å…ˆçº§ï¼Œå°†taskåˆ—åˆ°çœ‹æ¿ï¼ˆåŒæ—¶åˆ—åˆ°ç³»ç»Ÿå’Œç™½æ¿ä¸Šï¼‰ï¼Œå¹¶æ¯å¤©è¿½è¸ªæ›´æ–°ã€‚

> ç†è§£äº§å“ç»ç†çš„çœŸæ­£æ„å›¾ï¼Œæ˜ç™½éœ€æ±‚äº§ç”Ÿçš„èƒŒæ™¯

#### æ‹†åˆ†ç»„ä»¶å’Œæ¨¡å—

å‰ç«¯ç›®å‰æ¯”è¾ƒæ¨èçš„å·¥ä½œæ–¹æ³•æ˜¯ç»„ä»¶å¼å¼€å‘ï¼Œå³å°†é¡µé¢æ‹†åˆ†æˆè¶³å¤Ÿç²’åº¦çš„å°ç»„ä»¶å’Œæ¨¡å—ã€‚ç”±å•ç‹¬çš„äººè´Ÿè´£ç›¸å…³ç‹¬ç«‹æ¨¡å—å’Œç»„ä»¶çš„å¼€å‘ï¼Œåšåˆ°ç»„ä»¶å’Œæ¨¡å—çš„å¤ç”¨ï¼Œè¿™ä¸ªå·²ç»åœ¨ç¬¬äºŒç« è®²è¿‡äº†ï¼Œä¸åœ¨æ­¤èµ˜è¿°ã€‚

#### å»ºç«‹åˆ†æ”¯

ç›®å‰å¤§å¤šæ•°äº’è”ç½‘å…¬å¸çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·éƒ½æ˜¯ä½¿ç”¨gitï¼ŒåŒ…æ‹¬æˆ‘ä»¬çš„å…¬å¸ï¼Œè€Œä¸”å…¬å¸å†…éƒ¨é€šå¸¸ä¹Ÿæœ‰è‡ªå·±çš„git flowï¼Œæˆ‘ä»¬åšæ–°åŠŸèƒ½çš„æ—¶å€™é€šå¸¸ä¼šå»ºç«‹ä¸€ä¸ªfeatureåˆ†æ”¯ï¼Œå¼€å‘å®Œæ¯•ååˆå¹¶åˆ°releaseåˆ†æ”¯ç­‰å¾…æµ‹è¯•å’Œå‘å¸ƒã€‚å½“ç„¶å°±ç®—ä½ æ˜¯SVNæ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

### é˜¶æ®µäºŒ å¼€å§‹å¼€å‘ - æäº¤æµ‹è¯•

#### å†™å•å…ƒæµ‹è¯•

è¿™é‡Œé€šå¸¸æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜ã€‚é—®é¢˜ä¸€æ˜¯èƒ½ä¸èƒ½ä¸å†™å•å…ƒæµ‹è¯•ï¼Œæˆ–è€…è¯´ä¸å†™å•å…ƒæµ‹è¯•æœ‰ä»€ä¹ˆä¸å¥½çš„å½±å“ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ä¸ºä»€ä¹ˆè¦å…ˆå†™å•å…ƒæµ‹è¯•è€Œä¸æ˜¯å…ˆå†™ä»£ç ï¼Ÿæˆ‘ä»¬å¯¹è¿™ä¸¤ä¸ªé—®é¢˜ä¸€ä¸€è¿›è¡Œè§£ç­”ã€‚å…ˆè¯´ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå…¶å®ä¸å†™å•å…ƒæµ‹è¯•æ˜¯å¾ˆå®¹æ˜“åšåˆ°çš„ï¼Œå°±å¥½åƒæˆ‘ä»¬ä¸åŠªåŠ›é”»ç‚¼èº«ä½“ä¸€æ ·ç®€å•ï¼Œä½†æ˜¯å½“æˆ‘ä»¬é¢å¯¹è‡ªå·±çš„ä¸€å¤§å—è…¹è‚Œçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æœ‰é‚£ä¹ˆä¸€ä¸ç‚¹å„¿åæ‚”å‘¢ï¼Ÿå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå½“ä½ å¼€å§‹å†™çš„æ—¶å€™ï¼Œæ²¡æœ‰ä»»ä½•æ”¶æ•ˆï¼Œæ®ç»Ÿè®¡å†™å•å…ƒæµ‹è¯•çš„æ—¶é—´è¦é«˜äºå†™ä»£ç çš„æ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦â€œç™½â€èŠ±é‚£ä¹ˆå¤šæ—¶é—´å†™æµ‹è¯•ç”¨ä¾‹å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºå½“éšç€åº”ç”¨è§„æ¨¡é€æ¸æ‰©å¤§ï¼Œå¤æ‚åº¦é€æ¸ä¸Šå‡çš„æ—¶å€™ï¼Œå®Œå–„çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç»™ä½ ä¿®æ”¹ä»£ç çš„å‹‡æ°”ã€‚å½“å•å…ƒæµ‹è¯•æ˜¾ç¤ºall passçš„æ—¶å€™ï¼Œä»¿ä½›æœ‰äººè·Ÿä½ è¯´â€œå¹²å§ï¼Œå“¥ä»¬ï¼Œæ²¡æ¯›ç—…ã€‚â€ã€‚ä½ ä¸ä¼šå› ä¸ºæ€•æ”¹åäº†ä»£ç è€Œè¹‘æ‰‹è¹‘è„šã€‚ä½†è¿™é‡Œè¦å¼ºè°ƒä¸€ç‚¹çš„æ˜¯ï¼Œè¦†ç›–ç‡ä½çš„å•å…ƒæµ‹è¯•ä¸ä½†ä¸èƒ½å¤Ÿèµ·ä½œç”¨ï¼Œåè€Œä¼šç»™äººä¸€ç§â€œå¹²å§ï¼Œå“¥ä»¬ï¼Œæ²¡æ¯›ç—…ã€‚â€çš„å‡è±¡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åé¢å¼ºè°ƒä½¿å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¶³å¤Ÿé«˜çš„åŸå› ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸‹ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µå«æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰ã€‚TDDçš„ç†å¿µå°±æ˜¯å…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åå†™å…·ä½“å®ç°ã€‚TDDçš„ä¸€ä¸ªé‡å¤§ä¼˜ç‚¹å°±æ˜¯ä½ å°†å…·ä½“å®ç°æ”¾åˆ°åé¢ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ·±é™·ç»†èŠ‚çš„æ³¥æ½­ï¼Œä½ å°±æ‹¥æœ‰æ›´æ¸…æ™°çš„è§†é‡ï¼Œä½ ä¼šå¯¹ä¸šåŠ¡æˆ–è€…é€»è¾‘ç†è§£æ›´ä½³æ·±åˆ»ã€‚è¿™å°±å¥½åƒä½ çœ‹è¿‡å¾ˆå¤šé«˜æ‰‹å†™ä»£ç ï¼Œå®ƒä»¬ä¼šå…ˆå°†æ€è·¯å†™ä¸‹æ¥ï¼Œç„¶åå†å†™ä»£ç æ˜¯ä¸€ä¸ªé“ç†ã€‚

å›ç­”äº†å…³äºæµ‹è¯•çš„å¸¸è§é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å•å…ƒæµ‹è¯•ç©¶ç«Ÿæ€ä¹ˆå†™ã€‚å…¶å®ä¹Ÿç®€å•ï¼Œå•å…ƒæµ‹è¯•é€šå¸¸æ¥è‡ªäºæµ‹è¯•äººå‘˜æ•´ç†çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå½“ç„¶ä¸€äº›ç‰¹æ®Šçš„ç®—æ³•é€»è¾‘éœ€è¦è‡ªå·±æ•´ç†å•¦ã€‚ä¸€ä¸ªåŸåˆ™å°±æ˜¯èƒ½ç”¨æµ‹è¯•åŒå­¦å°±ç”¨æµ‹è¯•åŒå­¦ï¼Œä¸ç”¨ç™½ä¸ç”¨ï¼Œå¯¹å§ï¼Ÿä½†æ˜¯å‰ç«¯å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæ€»ä¼šæ„Ÿè§‰å¾ˆå›°éš¾ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆè§‰å¾—çš„ã€‚åæ¥æˆ‘æ¥è§¦äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ•´ä¸ªäººå°±æ„Ÿè§‰è±ç„¶å¼€æœ—ã€‚ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå‘½ä»¤å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¼Šç«¯ï¼Œå¼•ç”¨Joe Armstrongï¼ˆErlangè¯­è¨€çš„åˆ›é€ è€…\)çš„ä¸€å¥è¯å°±æ˜¯ï¼š

> ä½ æƒ³è¦ä¸€ä¸ªé¦™è•‰ï¼Œä½†å¾—åˆ°çš„å´æ˜¯ä¸€ä¸ªæ‹¿ç€é¦™è•‰çš„å¤§çŒ©çŒ©

æ²¡é”™ï¼Œå½“æˆ‘å›é¡¾æˆ‘å¾ˆä¹…ä¹‹å‰çš„ä»£ç ï¼Œçš„ç¡®å¦‚æ­¤ã€‚è¿™ä¹Ÿä¸èƒ½å®Œå…¨æ€ªæˆ‘ä»¬ï¼Œæˆ‘ä»¬å·²ç»ä¹ æƒ¯äº†å„ç§å‡è®¾ï¼Œå„ç§å¤–éƒ¨ä¾èµ–ã€‚æˆ‘ä»¬å°†è¿™äº›å˜æˆç†æ‰€å½“ç„¶ï¼Œæˆ‘ä»¬ä¸æ–­åœ°æ”¹å˜çŠ¶æ€çš„çŠ¶æ€ï¼Œå¯¼è‡´çŠ¶æ€éš¾ä»¥è¿½è¸ªã€‚å› æ­¤æˆ‘ä»¬å†™å•å…ƒæµ‹è¯•éå¸¸å›°éš¾ã€‚å½“ä½ å¼€å§‹ä»¥å‡½æ•°å¼ç¼–ç¨‹ç†å¿µå†™ä»£ç çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä»£ç éå¸¸å¥½æµ‹è¯•ã€‚æ¯”å¦‚ç›®å‰æ¯”è¾ƒæµè¡Œçš„reactçš„å±•ç¤ºç»„ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå¯¹è¿™æ ·çš„ç»„ä»¶è¿›è¡Œæµ‹è¯•å°±å¾ˆç®€å•ã€‚å½“ä½ ç ”ç©¶reduxçš„ä»£ç çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°reduxçš„reducerè®¾è®¡çš„ç²¾å¦™ï¼Œä»–å°†reduceåœ¨ç©ºé—´ä¸Šçš„æŠ½è±¡å˜æˆreduceråœ¨æ—¶é—´ä¸Šçš„æŠ½è±¡ï¼Œå¹¶ä¸”reducerçº¯å‡½æ•°çš„ç†å¿µä¹Ÿè®©ä»£ç æ›´å®¹æ˜“æµ‹è¯•ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘çš„[è¿™ç¯‡åšæ–‡](https://my.oschina.net/wanjubang/blog/1580050)

#### é˜²å¾¡æ€§ç¼–ç 

å†™ä»£ç ä¹‹å‰è¦å…ˆæƒ³æœ‰æ²¡æœ‰è½®å­å¯ç”¨ã€‚å¦‚æœæ²¡æœ‰åœ¨å¼€å§‹é€ è½®å­ã€‚æˆ‘å–œæ¬¢å°†é€»è¾‘åˆ’åˆ†ä¸ºå¤šä¸ªå‡½æ•°ï¼Œç„¶ååœ¨å‡½æ•°å¼€å¤´å¯¹å…¥å‚è¿›è¡Œæ ¡éªŒï¼Œå¹¶å¯¹æ¯ä¸€æ­¥å¯èƒ½å‡ºé”™çš„åœ°æ–¹è¿›è¡Œæ ¡éªŒï¼Œå…¸å‹çš„æ˜¯npeï¼ˆnull pointer exceptionï¼‰ã€‚è¿™å°±æ˜¯å…¸å‹çš„é˜²å¾¡æ€§ç¼–ç¨‹ã€‚

```javascript
// String a -> Number b -> Boolean
function testA(a, b) {
   if (!a) return false;
   if (!isString(a)) return false;
   if (!b) return false;
   if(!isNumber(b)) return false
   return !!a.concat(b);
}
```

è¿™ç§æ–¹æ³•åœ¨å‰ç«¯å°¤å…¶æœ‰æ•ˆï¼Œå› ä¸ºjsæ˜¯åŠ¨æ€è¯­è¨€ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨typescriptç­‰å¢åŠ é™æ€æ£€æµ‹çš„åŠŸèƒ½çš„è¯ï¼Œä»£ç ä¼šå˜å¾—è„†å¼±ä¸å ªã€‚ä¸€ä¸ªç®€å•çš„åšæ³•å°±æ˜¯ï¼Œå‡è®¾æ¯ä¸€è¡Œä»£ç éƒ½ä¼šé‡åˆ°å¼‚å¸¸æƒ…å†µï¼Œéƒ½ä¼šæŠ¥é”™ã€‚

#### ä½¿å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¶³å¤Ÿé«˜

å‰é¢è®²äº†å•å…ƒæµ‹è¯•çš„é‡è¦æ€§ï¼Œä»¥åŠå•å…ƒæµ‹è¯•çš„å†™æ³•æ€è·¯ã€‚è¿™é‡Œå¼ºè°ƒä¸€ä¸‹å•å…ƒæµ‹è¯•çš„è¦†ç›–é—®é¢˜ï¼Œä½çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ¯«æ— ç”¨å¤„ï¼Œç”šè‡³ä¼šèµ·åä½œç”¨ï¼Œå› æ­¤ä¿æŒè¶³å¤Ÿé«˜çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ˜¾å¾—éå¸¸é‡è¦ï¼Œä¸šç•Œæ™®éè®¤å¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡åœ¨95%ä»¥ä¸Šæ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚

### é˜¶æ®µä¸‰ æµ‹è¯•å®Œæ¯• - å¯å‘å¸ƒçŠ¶æ€

è¿™ä¸ªé˜¶æ®µæˆ‘ä»¬çš„ä»£ç å·²ç»ç»è¿‡äº†è‡ªæµ‹å’Œæµ‹è¯•äººå‘˜çš„å›å½’ï¼Œæˆ‘ä»¬è®¤ä¸ºå¯ä»¥å‘å¸ƒä¸Šçº¿äº†ã€‚é€šå¸¸æˆ‘ä»¬è¿˜ä¼šè®©äº§å“ç»ç†è¿›è¡ŒéªŒæ”¶ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ä»–ä»¬æƒ³è¦çš„æ•ˆæœã€‚

#### ç¼–è¯‘

ç›®å‰å†™çš„ä»£ç æ˜¯åœ¨å¤šä¸ªæ–‡ä»¶çš„ï¼Œæˆ‘ä»¬çš„ä»£ç ä½¿ç”¨äº†å¾ˆå¤šæµè§ˆå™¨ä¸æ”¯æŒçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦å°†cssä»jsä¸­æå–å‡ºæ¥ç­‰ç­‰ã€‚è¿™äº›å·¥ä½œéƒ½éœ€è¦é€šè¿‡ç¼–è¯‘æ¥å®Œæˆã€‚

#### åŒ…åˆ†æ

æˆ‘ä»¬çš„é¡¹ç›®çš„ä»£ç æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¾èµ–æ„æˆçš„ï¼Œæˆ‘ä»¬ä¼šä¾èµ–ä¸€äº›æ¡†æ¶å¦‚reactï¼Œvueï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€äº›å·¥å…·åº“å¦‚lodashï¼Œramdajsï¼Œmostjsç­‰ã€‚è¿™äº›éƒ½æ„æˆäº†é¡¹ç›®çš„ä¸ç¨³å®šå’Œä¸ç¡®å®šã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¤§å…¬å¸å¦‚é˜¿é‡Œï¼Œä¼šå¯¹å¤–éƒ¨ä¾èµ–æœ‰ç€å¾ˆå¼ºçš„æ‰§å¿µã€‚npmä¹Ÿå¯Ÿè§‰åˆ°äº†è¿™ä¸€ç‚¹ï¼Œä»¥è‡³äºç°åœ¨çš„npmåœ¨å®‰è£…è¿‡åéƒ½æ˜¯é”å®šç‰ˆæœ¬çš„ã€‚ä½†è¿™ä¾æ—§æ— æ³•ä¿è¯ä¾èµ–åŒ…çš„è´¨é‡ã€‚ ä¸€ä¸ªæŸ¥çœ‹åŒ…è´¨é‡çš„åŸåˆ™å°±æ˜¯æ–‡æ¡£è¶³å¤Ÿä¸°å¯Œï¼Œå•å…ƒæµ‹è¯•è¦†ç›–ç‡è¶³å¤Ÿé«˜ï¼Œå—æ¬¢è¿ï¼ˆstartè¶³å¤Ÿå¤šï¼‰ï¼Œè™½ç„¶ä¸Šè¿°æ¡ä»¶ä¸æ˜¯ä¸€ä¸ªåº“è´¨é‡è‰¯å¥½çš„å……åˆ†æ¡ä»¶ï¼Œä½†å´æ˜¯å¿…è¦æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒç­›é€‰ä¸€å¤§æ‰¹ä¸åˆæ ¼çš„åº“ã€‚

#### ä»£ç æ£€æŸ¥

æˆ‘ä»¬ä¼šå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæœ‰æ²¡æœ‰è¯­æ³•é”™è¯¯ç­‰ã€‚è¿™ä¸€æ­¥å¯ä»¥é€šè¿‡eslintæ£€æŸ¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡flowæˆ–è€…typescriptè¿™æ ·çš„é™æ€æ£€æŸ¥å·¥å…·æ£€æŸ¥ã€‚æ€»ä¹‹ï¼Œè¿™ä¸€æ­¥æ˜¯æ£€æŸ¥æœ‰æ²¡æœ‰é”™è¯¯ä»£ç æˆ–è€…ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ã€‚

#### ä»£ç ä¼˜åŒ–

ä»£ç å·²ç»é€šè¿‡äº†æ£€æŸ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚å‹ç¼©ï¼Œåˆå¹¶ï¼Œå»ç©ºæ ¼å»consoleç­‰ï¼Œæˆ–è€…æå–å…¬å…±ä¾èµ–ï¼Œå†æˆ–è€…åˆ é™¤åƒµå°¸ä»£ç ï¼ˆtree shakingï¼‰ã€‚

#### CodeReview

æˆ‘ä»¬ä¼šç»„ç»‡ç›¸å…³äººå‘˜è¿›è¡Œä»£ç è¯„å®¡ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚è¿™éƒ¨åˆ†æ˜¯äººå·¥å®Œæˆï¼Œæ˜¯å¯¹å‰é¢å·¥ä½œçš„æœ€åæŠŠå…³ã€‚

### é˜¶æ®µå›› å‡†å¤‡å‘å¸ƒ - å‘å¸ƒå®Œæˆ

#### å‘å¸ƒé™æ€èµ„æºåˆ°CDN

æˆ‘ä»¬èµ„æºå‘å¸ƒåˆ°CDNç­‰å¾…æœ€ç»ˆçš„å‘å¸ƒï¼Œä¿è¯ç‰ˆæœ¬å‘å¸ƒä¹‹åï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥è·å¾—æœ€æ–°çš„CDNèµ„æºã€‚

#### æ‰“tag

æˆ‘ä»¬å°†ä»£ç æ‰“tagï¼Œä¸€ä¸ªä¸ªtagå°±åƒæ˜¯ä¸€ä¸ªä¸ªé‡Œç¨‹ç¢‘ã€‚ å½“æˆ‘ä»¬éœ€è¦å¯¹æŸä¸€ä¸ªç‰ˆæœ¬ä»£ç è¿›è¡Œä¿®å¤çš„æ—¶å€™ï¼Œtagçš„ä½œç”¨å°±æ˜¾ç¤ºå‡ºæ¥äº†ã€‚

#### ä¿®æ”¹çº¿ä¸Šç‰ˆæœ¬å·

æˆ‘ä»¬çš„åŠŸèƒ½å·²ç»è¾¾åˆ°äº†å¯ä»¥å‘å¸ƒçš„çŠ¶æ€ï¼Œç„¶åæˆ‘ä»¬ä¼šå¯¹ç‰ˆæœ¬è¿›è¡Œå‘å¸ƒã€‚ä¿®æ”¹çº¿ä¸Šçš„ç‰ˆæœ¬å·ï¼Œè¿™æ ·æˆ‘ä»¬çš„ç”¨æˆ·å°±å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬æœ€æ–°å†™çš„ä»£ç äº†ã€‚

### é˜¶æ®µäº” å‘å¸ƒä¸Šçº¿ - çº¿ä¸ŠéªŒè¯

æˆ‘ä»¬å·²ç»å°†ä»£ç å‘å¸ƒä¸Šçº¿äº†ï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦éªŒè¯ä¸‹ä»£ç æ˜¯å¦æ­£ç¡®å‘å¸ƒï¼Œæœ‰æ²¡æœ‰å½±å“çº¿ä¸Šå…¶ä»–åŠŸèƒ½ã€‚

ä¸Šé¢çš„è¿‡ç¨‹å¯èƒ½æ˜¯å¤§å¤šæ•°äº’è”ç½‘å…¬å¸çš„å·¥ä½œæµç¨‹äº†ã€‚é‚£ä¹ˆä¸‹ä¸€èŠ‚æˆ‘ä¼šå¯¹æ¯ä¸€ä¸ªé˜¶æ®µè¿›è¡Œåˆ†æï¼Œæ‰¾å‡ºå¯ä»¥è‡ªåŠ¨åŒ–çš„ç‚¹ï¼Œå¹¶è®²è¿°è‡ªåŠ¨åŒ–çš„æŠ€æœ¯æ€è·¯æ˜¯æ€æ ·çš„ã€‚

## å®ç°æµç¨‹è‡ªåŠ¨åŒ–çš„æ€è·¯æ˜¯ä»€ä¹ˆ

ä¸Šé¢è®²è¿°äº†å¸¸è§„çš„éœ€æ±‚äº§ç”Ÿåˆ°åŠŸèƒ½å‘å¸ƒçš„å®Œæ•´è¿‡ç¨‹ï¼Œé€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°é˜¶æ®µä¸‰å’Œé˜¶æ®µå››æ˜¯å¯ä»¥é«˜åº¦è‡ªåŠ¨åŒ–çš„ï¼Œé˜¶æ®µä¸‰å’Œé˜¶æ®µå››è¿›è¡Œåšäº†ä»€ä¹ˆäº‹ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶çš„ç†è§£ï¼Œæˆ‘æ•´ç†äº†ä¸€ä¸ªå›¾ï¼š

![&#x56FE;3.1](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.1.png)

å›¾ä¸­çš„è™šçº¿è¡¨ç¤ºè‡ªåŠ¨å®Œæˆï¼Œæ— éœ€äººå·¥ã€‚å®çº¿è¡¨ç¤ºéœ€è¦äººå·¥æ“ä½œã€‚å›¾çš„ä¸­å¿ƒç‚¹æ˜¯devï¼Œå¯ä»¥çœ‹å‡ºdevçš„æ“ä½œæœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯æäº¤ï¼ˆcommitï¼‰æ‰“tagï¼Œä»¥åŠæäº¤prï¼ˆpull requestï¼‰ã€‚ä¸åŒçš„æ“ä½œä¼šè§¦å‘ä¸åŒçš„é’©å­ï¼Œå®Œæˆä¸åŒçš„æ“ä½œã€‚æˆ‘ä»¬ä¸€ä¸ªèŠ‚ç‚¹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆ†æï¼Œå®ƒä»¬åˆ†åˆ«åšäº†ä»€ä¹ˆäº‹ï¼Œä»¥åŠè®¾è®¡å®ç°çš„æ€è·¯ã€‚å›¾ä¸­éœ€è¦å®ç°çš„ç³»ç»Ÿæœ‰ä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯åŒ…åˆ†æå¼•æ“ï¼ˆpackage analyserï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯CIä¸­å¿ƒï¼Œç¬¬ä¸‰ä¸ªæ˜¯CDä¸­å¿ƒï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ã€‚

### package analyser

åŒ…åˆ†æå·¥å…·è¿™é‡Œå¯ä»¥æ˜¯å‰ç«¯çš„npmåŒ…åˆ†æï¼Œä¹Ÿå¯ä»¥æ˜¯åç«¯çš„æ¯”å¦‚mavenåŒ…åˆ†æã€‚è¿™é‡Œä»¥npmåŒ…åˆ†æä¸ºä¾‹ï¼Œmavenç­‰å…¶ä»–åŒ…åˆ†æåŒç†ï¼Œåªæ˜¯å…·ä½“æŠ€æœ¯å®ç°ç»†èŠ‚ä¸åŒï¼ŒnpmåŒ…åˆ†æå’ŒmavenåŒ…åˆ†æåªæ˜¯å…·ä½“ç­–ç•¥ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç­–ç•¥æ¨¡å¼å°†å…·ä½“çš„åˆ†æç®—æ³•å°è£…èµ·æ¥ã€‚é¦–å…ˆçœ‹ä¸‹åŒ…åˆ†æå¼•æ“å®ç°çš„åŠŸèƒ½ï¼Œå…¶å®åŒ…åˆ†æå¼•æ“å°±æ˜¯åˆ†æåº”ç”¨ä¾èµ–çš„åŒ…ï¼Œå¹¶é€ä¸ªé€’å½’åˆ†æå…¶ä¾èµ–åŒ…ï¼Œæ‰¾åˆ°å…¶ä¸­æœ‰é£é™©çš„ä¾èµ–ï¼Œå¹¶é€šçŸ¥ç»™ä½¿ç”¨è€…ï¼ˆé¡¹ç›®æ‹¥æœ‰è€…ï¼‰ã€‚å…·ä½“åŠŸèƒ½åŒ…æ‹¬ä½†ä¸é™äºåˆ†ææœ‰å®‰å…¨é£é™©çš„åŒ…ï¼Œæç¤ºæœ‰è¡¥ä¸æ›´æ–°ï¼Œæœ‰äº†è¿™äº›ä¾èµ–æ•°æ®ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ç»Ÿè®¡å…¬å¸èŒƒå›´å†…åŒ…çš„ä½¿ç”¨æƒ…å†µï¼ˆåŒ…æ‹¬å„ä¸ªç‰ˆæœ¬ï¼‰ï¼Œè¿™äº›æ•°æ®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚åé¢ä¸€èŠ‚æˆ‘ä»¬ä¼šå…·ä½“åˆ†æåŒ…åˆ†æå¼•æ“çš„å®ç°ç»†èŠ‚ï¼Œä½¿è¯»è€…å¯ä»¥è‡ªè¡Œæ­å»ºä¸€ä¸ªnpmåŒ…åˆ†æå¼•æ“ã€‚

### CI

CIï¼ˆContinuous Integrationï¼‰æ˜¯æŒç»­å°†æ–°åŠŸèƒ½é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿçš„ä¸€ç§åšæ³•ï¼Œæé™ç¼–ç¨‹ä¹Ÿå€Ÿé‰´äº†CIçš„åŸºæœ¬æ€æƒ³ã€‚é‚£ä¹ˆæˆ‘ä»¬æ˜¯æ€æ ·ä½¿ç”¨CIçš„å‘¢ï¼Ÿæˆ‘åˆšæ‰åœ¨å›¾ä¸­ä¹Ÿä½“ç°äº†ï¼Œå¼€å‘è€…çš„æäº¤ä¼šè§¦å‘CIï¼ŒCIä¼šåšä¸€äº›å•å…ƒæµ‹è¯•ï¼Œä»£ç æ£€æµ‹ç­‰å·¥ä½œï¼Œå¦‚æœä¸é€šè¿‡åˆ™åé¦ˆç»™ç›¸å…³äººå‘˜ï¼Œå¦åˆ™å°†é€šè¿‡çš„ä»£ç åˆå¹¶åˆ°åº“ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´CIå¹¶ä¸æ˜¯ä¸€é¡¹æŠ€æœ¯ï¼ŒäºŒæ˜¯ä¸€ç§æœ€ä½³å®è·µï¼Œæ›´å¤šå¯ä»¥å‚è€ƒ[wikipedia](https://en.wikipedia.org/wiki/Continuous_integration)ã€‚åé¢æˆ‘ä¼šä»‹ç»å®ç°ä¸€ä¸ªCIçš„åŸºæœ¬æ€è·¯ã€‚

### CD

CD\(Continuous Delivery\)åŒæ ·ä¹Ÿæ˜¯ä¸€ç§æœ€ä½³å®è·µï¼Œå¹¶ä¸æ˜¯ä¸€é¡¹æŠ€æœ¯ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ä¿è¯ä»£ç éšæ—¶å¯å‘å¸ƒï¼Œå®ƒä¿è¯äº†ä»£ç å‘å¸ƒçš„å¯ä¿¡èµ–æ€§ï¼ŒåŒæ—¶æŒç»­é›†æˆå‡å°‘äº†å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚æ›´å¤šå¯ä»¥å‚è€ƒ[wikipedia](https://en.wikipedia.org/wiki/Continuous_delivery)ã€‚åé¢æˆ‘ä¼šä»‹ç»å®ç°ä¸€ä¸ªCDçš„åŸºæœ¬æ€è·¯ã€‚

å½“ç„¶æˆ‘ä»¬çš„ç³»ç»Ÿè¿˜æ¯”è¾ƒä¸å®Œå–„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¢åŠ é…ç½®ä¸­å¿ƒï¼Œæ–¹ä¾¿å¯¹ç‰ˆæœ¬è¿›è¡Œç®¡ç†ï¼Œè¿˜å¯ä»¥å¢åŠ ç›‘æµ‹å¹³å°ï¼ˆç¬¬å››ç« æœ‰è®²ï¼‰ï¼Œå¤§å®¶å¯ä»¥å‘æŒ¥è‡ªå·±çš„èªæ˜æ‰æ™ºã€‚

## æˆ‘ä»¬è¿˜æ¼äº†ä»€ä¹ˆ

ä¸Šé¢è®²è¿°äº†ä¸€ä¸ªéœ€æ±‚äº§ç”Ÿåˆ°åŠŸèƒ½ä¸Šçº¿çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¹Ÿåˆ†æäº†å¦‚æœè¿›è¡Œè‡ªåŠ¨åŒ–ã€‚æˆ‘ä»¬è¿˜å¿½ç•¥äº†ä¸€ä¸ªé¡¹ç›®åˆæœŸçš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯æ­å»ºè„šæ‰‹æ¶çš„è¿‡ç¨‹ã€‚å¦‚ä½•å°†æ­å»ºè„šæ‰‹æ¶çš„è¿‡ç¨‹ä¹Ÿè‡ªåŠ¨åŒ–ï¼Œé…ç½®åŒ–ï¼Œæœ€å¥½è¿˜èƒ½åœ¨å…¬å¸èŒƒå›´å†…ä¿æŒä¸€è‡´æ€§ã€‚

### è„šæ‰‹æ¶åšäº†ä»€ä¹ˆ

å½“æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œè¦å…ˆè¿›è¡ŒæŠ€æœ¯è°ƒç ”å’Œé€‰å‹ï¼Œå½“ç¡®å®šäº†æŠ€æœ¯æ–¹å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¶å­ï¼Œé¡¹ç›®æˆå‘˜å¯ä»¥æ ¹æ®è¿™ä¸ªæ¶å­å†™ä»£ç ã€‚è¿™ä¸ªæ¶å­å¯ä»¥æ‰‹å·¥ç”Ÿæˆï¼Œå¾ˆæ—©ä¹‹å‰æˆ‘å°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼Œä½†æ˜¯æ‰‹å·¥ç”Ÿæˆçš„æœ‰å¾ˆå¤šç¼ºç‚¹ã€‚ç¬¬ä¸€å°±æ˜¯æ•ˆç‡ä½ï¼Œç¬¬äºŒå°±æ˜¯ä¸åˆ©äºç»Ÿä¸€ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†äº‘è„šæ‰‹æ¶çš„æ¦‚å¿µã€‚è¦æ˜ç™½äº‘è„šæ‰‹æ¶æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“è„šæ‰‹æ¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è„šæ‰‹æ¶åšäº†ä»€ä¹ˆäº‹ï¼Œç®€å•æ¥è¯´è„šæ‰‹æ¶å°±æ˜¯ç”Ÿæˆé¡¹ç›®çš„åˆå§‹ä»£ç ã€‚æˆ‘ä»¬é€šè¿‡ç›®å‰æ¯”è¾ƒç«çš„reactçš„é…å¥—è„šæ‰‹æ¶å·¥å…·create-react-app\(ä»¥ä¸‹ç®€ç§°cra\)æ¥è®¤è¯†ä¸€ä¸‹è„šæ‰‹æ¶çš„å·¥ä½œåŸç†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹craçš„ä½¿ç”¨æ–¹æ³•ï¼š

```bash
npm install -g create-react-app

create-react-app my-app
cd my-app/
npm start
```

è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸‹é¢çš„é¡¹ç›®ç»“æ„ï¼š

![&#x56FE;3.2](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.2.png)

å¦‚æœè¦å®ç°ä»¥ä¸ŠåŠŸèƒ½ï¼Œä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æ‰§è¡Œcreate-react-app xxx ä¹‹åå»è¿œç«¯ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ã€‚å…¶å®craçš„æ€è·¯å°±æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ç”¨ä¸€å¼ å›¾æ¥è¡¨ç¤ºcraçš„åŸºæœ¬è¿‡ç¨‹ï¼š

![&#x56FE;3.3](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.3.png)

æ¯ä¸€æ­¥çš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥[æŸ¥çœ‹æºç ](https://github.com/facebookincubator/create-react-app/master/packages/create-react-app/createReactApp.js)

### ä¸­å¿ƒåŒ–ï¼Œå¯é…ç½®çš„è„šæ‰‹æ¶æœåŠ¡

ä¸Šé¢ä»‹ç»äº†è„šæ‰‹æ¶çš„ä½œç”¨å’Œå®ç°åŸç†ã€‚ä½†æ˜¯ä¸Šè¿°çš„è„šæ‰‹æ¶æ— æ³•å®ç°ä¸­å¿ƒåŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒå›¢é˜Ÿæ— æ³•å½¢æˆç›¸äº’æ„ŸçŸ¥ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ä¸åŒé¡¹ç›®çš„è„šæ‰‹æ¶æ˜¯ä¸åŒçš„æˆ–è€…ä¸èƒ½å¤Ÿå®ç°é«˜åº¦å®šåˆ¶åŒ–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªä¸­å¿ƒåŒ–ï¼Œå¯é…ç½®çš„è„šæ‰‹æ¶æœåŠ¡ï¼Œæˆ‘ç§°ä¹‹ä¸ºäº‘è„šæ‰‹æ¶ã€‚è„šæ‰‹æ¶é‡‡ç”¨CSæ¶æ„ã€‚å®¢æˆ·ç«¯å¯ä»¥æ˜¯ä¸€ä¸ªCLIï¼ŒæœåŠ¡ç«¯åˆ™æ˜¯ä¸€ä¸ªé…ç½®ä¸­å¿ƒï¼Œæ¨¡å—å‘ç°ä¸­å¿ƒã€‚å¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ªäº‘è„šæ‰‹æ¶çš„æ¶æ„å›¾ï¼š

![&#x56FE;3.4](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.4.png)

å®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤å‘Šè¯‰æœåŠ¡ç«¯æƒ³è¦åˆå§‹åŒ–çš„æ¨¡ç‰ˆä¿¡æ¯ï¼ŒæœåŠ¡ç«¯ä¼šä»æ¨¡æ¿åº“ä¸­æŸ¥æ‰¾å¯¹åº”æ¨¡æ¿ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™è¯·æ±‚npm registryï¼Œå¦‚æœæœ‰åˆ™è¿”å›å¹¶å°†å…¶åŒæ­¥åˆ°æ¨¡æ¿åº“ä¸­ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚å¦‚æœæ²¡æœ‰è¿”å›å¤±è´¥ã€‚ è¿™æ ·å¯¹ä¸åŒå›¢é˜Ÿæ¥è¯´ï¼Œè„šæ‰‹æ¶æ˜¯é€æ˜çš„ï¼Œå›¢é˜Ÿå¯ä»¥å®šåˆ¶é€‚åˆè‡ªå·±çš„è„šæ‰‹æ¶ï¼Œä¸Šä¼ åˆ°æ¨¡æ¿åº“ï¼Œä¾›å…¶ä»–å›¢é˜Ÿä½¿ç”¨ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªé—­ç¯ã€‚

## å¦‚ä½•æ­å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–å¹³å°

### æ­å»ºpackage analyser

æˆ‘å°†åŒ…åˆ†æå¼•æ“çš„å·¥ä½œè¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µ

#### å»ºç«‹é»‘ç™½åå•

æˆ‘ä»¬éœ€è¦å¯¹åŒ…åˆ†æï¼Œåˆ†æçš„ç»“æœå½“ç„¶éœ€è¦æ•°æ®æ”¯æ’‘ã€‚å› æ­¤é»‘ç™½åå•æ˜¯ä¸å¯å°‘çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±è¡¥å……é»‘ç™½åå•ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å»ºç«‹è‡ªå·±çš„é»‘ç™½åå•ç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¥å…¥ç¬¬ä¸‰æ–¹çš„æ•°æ®æºã€‚ä¸ç®¡æ€æ ·ï¼Œç¬¬ä¸€æ­¥æˆ‘ä»¬éœ€è¦æœ‰æ•°æ®æºï¼Œè¿™æ˜¯ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¥JSONæ¥æè¿°ä¸€ä¸‹æˆ‘ä»¬çš„æ•°æ®æº:

```javascript
// æ‰€æœ‰çš„keyéƒ½æ˜¯npmåŒ…çš„åŒ…å
{
 "whiteList": ["react", "redux", "ant-design"],
 "blackList": {
   "kid": ["insecure dependencies 'ssh-go'"]
 }
}
```

#### é€’å½’åˆ†æåŒ…å¹¶åŒ¹é…é»‘ç™½åå•

è¿™ä¸€æ­¥éœ€è¦é€’å½’åˆ†æåŒ…ã€‚ æˆ‘ä»¬çš„è¾“å…¥åªæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œnpmæ¥è¯´çš„è¯å°±æ˜¯ä¸€ä¸ªpackage.jsonæ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦æå–package.jsonçš„ä¸¤ä¸ªå­—æ®µdependencieså’ŒdevDependenciesï¼Œä¸¤è€…å°±æ˜¯é¡¹ç›®çš„ä¾èµ–åŒ…ï¼ŒåŒºåˆ«åœ¨äºåè€…æ˜¯å¼€å‘ä¾èµ–ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è·å¾—é¡¹ç›®çš„ä¸€ä¸ªä¾èµ–æ•°ç»„ã€‚å½¢å¦‚ï¼š

```javascript
 const dependencies = [{
   name: "react",
   version: "15.4.2"
 }, {
   name: "react-redux",
   version: "5.0.3"
 }]
```

ç„¶åæˆ‘ä»¬éœ€è¦éå†æ•°ç»„ï¼Œä»npm registryï¼ˆå¯ä»¥æ˜¯å®˜æ–¹çš„registryï¼Œ ä¹Ÿå¯ä»¥æ˜¯ç§æœ‰çš„é•œåƒæºï¼‰è·å–åŒ…çš„å…·ä½“å†…å®¹ï¼Œå¹¶é€’å½’è·å–ä¾èµ–ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è·å–äº†é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–çš„å’Œæ·±å±‚ä¾èµ–çš„åŒ…ã€‚æœ€åæˆ‘ä»¬éœ€è¦æ ¹æ®åŒ…åå»åŒ¹é…é»‘ç™½åå•ã€‚æˆ‘ä»¬è¿˜æœ‰ä¸€æ­¥éœ€è¦åšï¼Œå°±æ˜¯è·å–åŒ…çš„æ›´æ–°æ—¥å¿—ï¼Œå°†æœ‰æ„ä¹‰çš„æ—¥å¿—ï¼ˆè¿™é‡Œå¯ä»¥è‡ªå·±å°è£…ç®—æ³•ï¼Œç©¶ç«Ÿä»€ä¹ˆæ ·çš„æ›´æ–°æ—¥å¿—æ˜¯æœ‰æ„ä¹‰çš„ï¼Œç•™ç»™å¤§å®¶æ€è€ƒï¼‰è¾“å‡ºç»™é¡¹ç›®æ‹¥æœ‰è€…ã€‚

#### ç»“æœè¾“å‡º

æˆ‘ä»¬å·²ç»å°†æ‰€æœ‰çš„ä¾èµ–åŒ…è¿›è¡ŒåŒ¹é…ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»çŸ¥é“äº†ç³»ç»Ÿä¾èµ–çš„ç™½åå•åŒ…ï¼Œé»‘åå•åŒ…å’ŒunknownåŒ…ï¼Œæˆ‘ä»¬æœ‰äº†åŒ¹é…ä¹‹åçš„æ•°æ®æºã€‚

```javascript
 const result = {
    projectName: "demo"
    whiteList: ["react", "redux"],
    blackList: [{name: "kid", ["insecure dependencies 'ssh-go'"]}]ï¼Œ
    changeLog: [{name: ""react-redux, logs: {url: '', content: ''}}]
 }
```

æˆ‘ä»¬è¦åšåˆ°æ•°æ®å’Œæ˜¾ç¤ºåˆ†ç¦»ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°†æ•°æ®å•ç‹¬å­˜èµ·æ¥ï¼Œç„¶åé‡‡ç”¨å‹å¥½çš„ä¿¡æ¯å±•ç¤ºå‡ºæ¥ï¼Œè¿™éƒ¨åˆ†åº”è¯¥æ¯”è¾ƒç®€å•ï¼Œä¸å¤šè¯´äº†ã€‚

### æ­å»ºæŒç»­é›†æˆå¹³å°

å¦‚æœæƒ³è¦æ­å»ºæŒç»­å¹³å°çš„è¯ï¼Œæœ€åŸºç¡€çš„ä¸‰ä¸ªæœåŠ¡æ˜¯è¦æœ‰çš„ï¼Œlintï¼Œtestä»¥åŠreportã€‚å…¶å®lintï¼Œtestå’Œreportçš„å…·ä½“å®ç°å·²ç»è¶…å‡ºäº†CIçš„èŒƒç•´ï¼Œè¿™é‡Œå°±å¤§è‡´è®²ä»¥ä¸‹ã€‚å¯¹äºlintæ¥è¯´ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹jsæ–‡æœ¬çš„æ£€æŸ¥ï¼Œç„¶ååŒ¹é…ä¸€äº›è§„åˆ™ï¼Œä¸šç•Œæ¯”è¾ƒæœ‰åçš„æ˜¯çº¢å®ä¹¦çš„ä½œè€…nzakasçš„eslintï¼Œå…³äºeslintçš„æ•´ä½“æ¶æ„å¯ä»¥æŸ¥é˜…[è¿™é‡Œ](https://github.com/eslint/eslint/master/docs/developer-guide/architecture.md)zakasçš„åˆè¡·ä¸æ˜¯é‡å¤é€ ä¸€ä¸ªè½®å­ï¼Œè€Œæ˜¯åœ¨å®é™…éœ€æ±‚å¾—ä¸åˆ°JSHintå›¢é˜Ÿå“åº”çš„æƒ…å†µä¸‹ï¼Œè‡ªå·±å¼€å‘å¹¶å¼€æºäº†eslintï¼šä¸€ä¸ªæ”¯æŒå¯æ‰©å±•ã€æ¯æ¡è§„åˆ™ç‹¬ç«‹ã€ä¸å†…ç½®ç¼–ç é£æ ¼ä¸ºç†å¿µç¼–å†™ä¸€ä¸ªjs lintå·¥å…·ã€‚å¯¹äºtestï¼Œå…¶å®å°±æ˜¯è¿è¡Œå¼€å‘äººå‘˜å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ä¿è¯è¿è¡Œæ­£ç¡®ä¸”è¦†ç›–ç‡è¶³å¤Ÿé«˜ã€‚å¦‚æœä¸Šè¿°æ­¥éª¤å‡ºé”™ï¼Œåˆ™ä¼šå‘ç›¸å…³äººå‘˜å‘Šè­¦ã€‚ä¸‹é¢æ˜¯CIçš„æ¶æ„å›¾ï¼š

![&#x56FE;3.5](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.5.png)

ä»£ç ä¼šç»è¿‡lintï¼Œé€”ä¸­ä¼šä»é…ç½®ä¸­å¿ƒæ‹‰å–é¡¹ç›®çš„presetså’Œpluginsï¼Œé€šè¿‡åè¿›å…¥ä¸‹ä¸€ä¸ªæµæ°´çº¿testï¼Œtestä¼šå°†ä»£ç åˆ†å‘åˆ°æµè§ˆå™¨äº‘ä¸­è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œå¹¶å°†ç»“æœå‘ç»™ç›¸å…³äººå‘˜ï¼Œä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤å¦‚æœå‡ºé”™ä¹Ÿéƒ½ä¼šé€šè¿‡report serviceå‘é€ä¿¡æ¯ç»™ç›¸å…³äººå‘˜ã€‚

### æ­å»ºæŒç»­éƒ¨ç½²å¹³å°

æŒç»­éƒ¨ç½²åœ¨æŒç»­é›†æˆçš„åŸºç¡€ä¸Šï¼Œå°†é›†æˆåçš„ä»£ç éƒ¨ç½²åˆ°æ›´è´´è¿‘çœŸå®è¿è¡Œç¯å¢ƒçš„ã€Œç±»ç”Ÿäº§ç¯å¢ƒã€ï¼ˆproduction-like environmentsï¼‰ä¸­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å®Œæˆå•å…ƒæµ‹è¯•åï¼Œå¯ä»¥æŠŠä»£ç éƒ¨ç½²åˆ°è¿æ¥æ•°æ®åº“çš„ Staging ç¯å¢ƒä¸­æ›´å¤šçš„æµ‹è¯•ã€‚å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æ‰‹åŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚å› æ­¤æŒç»­éƒ¨ç½²æœ€å°çš„å•å…ƒå°±æ˜¯å°†ä»£ç åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªå¯ä»¥å‘å¸ƒçš„çŠ¶æ€ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»å…¸çš„ä¼ä¸šçº§æŒç»­éƒ¨ç½²å®ç°:

![&#x56FE;3.6](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.6.png)

[https://continuousdelivery.com/implementing/architecture/](https://continuousdelivery.com/implementing/architecture/)

å¯ä»¥çœ‹å‡ºæŒç»­é›†æˆï¼Œå…¶å®æ˜¯å°†æ–°æ¨¡å—èåˆåˆ°ç³»ç»Ÿé‡Œé¢ï¼Œå½¢æˆä¸€ä¸ªå¯å‘å¸ƒå•å…ƒ,å®ƒæœ¬èº«ä¸æ¶‰åŠåˆ°å‘å¸ƒçš„æµç¨‹ã€‚çœŸæ­£å°†ä»£ç å‘å¸ƒåˆ°çº¿ä¸Šï¼Œè¿˜æ˜¯éœ€è¦äººå·¥æ¥æ“ä½œã€‚

> å¯ä»¥é€šè¿‡é…ç½®ä¸­å¿ƒå®ç°ä»£ç å‘å¸ƒ

è¦æƒ³å®ç°æŒç»­éƒ¨ç½²çš„æ¶æ„ï¼Œæ˜¯éœ€è¦ä»£ç å’Œç³»ç»Ÿæ¶æ„çš„é…åˆï¼Œè¿™æ˜¯å’Œå‰é¢æˆ‘è®²è¿°çš„å…¶ä»–ç³»ç»Ÿä¸ä¸€æ ·ã€‚æŒç»­éƒ¨ç½²è¦æ±‚ä»£ç çš„è€¦åˆåº¦è¦è¶³å¤Ÿä½ï¼Œå°½é‡å°‘åœ°å½±å“å…¶ä»–æ¨¡å—ã€‚æ¯å½“å‘å¸ƒä¸€ä¸ªæ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œä¸éœ€è¦å°†å…¨éƒ¨ä»£ç æµ‹è¯•å›å½’ï¼Œè€Œæ˜¯é‡‡ç”¨mockï¼Œstubç­‰æ–¹å¼æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ã€‚ç›®å‰æ¯”è¾ƒæµè¡Œçš„å¾®æœåŠ¡ï¼Œä¹Ÿæ˜¯ä¸€ç§å°†ä»£ç è§£è€¦åˆçš„ä¸€ç§å®è·µï¼Œå®ƒå°†ç³»ç»Ÿåˆ’åˆ†ä¸ºè‹¥å¹²ç‹¬ç«‹è¿è¡Œçš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ï¼Œç”šè‡³æœåŠ¡ä¹‹é—´çš„è¯­è¨€ï¼ŒæŠ€æœ¯æ¶æ„éƒ½ä¸ç›¸åŒã€‚å‰é¢çš„ç« èŠ‚è®²è¿°äº†ç»„ä»¶åŒ–å’Œæ¨¡å—åŒ–ï¼Œåœ¨è¿™é‡Œåˆå¯ä»¥çœ‹å‡ºç»„ä»¶åŒ–å’Œæ¨¡å—åŒ–çš„é‡è¦æ€§ã€‚

æ›´å¤šå…³äº[æŒç»­éƒ¨ç½²å®ç°](https://continuousdelivery.com/implementing/architecture/)çš„ä»‹ç»

### æ­å»ºé€šçŸ¥æœåŠ¡ç­‰å…¶ä»–å¯æ¥å…¥çš„ç¬¬ä¸‰æ–¹æœåŠ¡

å‰é¢åå¤æåˆ°äº†åé¦ˆç³»ç»Ÿfeedbackã€‚å¯èƒ½æˆ‘ä»¬è¿˜éœ€è¦å…¶ä»–ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œæ¯”å¦‚æ•°æ®å¯è§†åŒ–ç³»ç»Ÿç­‰ã€‚è¿™é‡Œä»¥æ¥å…¥é€šçŸ¥æœåŠ¡ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•æ¥å…¥ä¸€ä¸ªé€šç”¨çš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿã€‚åœ¨è°ˆé€šçŸ¥æœåŠ¡å…·ä½“ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®²ä¸‹æ¥å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡éœ€è¦åšä»€ä¹ˆã€‚æœ¬è´¨ä¸Šæ¥å…¥ä¸åŒçš„æœåŠ¡æ˜¯æœåŠ¡æ²»ç†çš„èŒƒç•´ï¼Œè€Œç›®å‰æœåŠ¡æ²»ç†å½“å±å¾®æœåŠ¡å æ®ä¸Šé£ã€‚è¿™ç§é€šè¿‡ä¸æ–­æ¥å…¥â€œç¬¬ä¸‰æ–¹â€æœåŠ¡çš„æ–¹å¼ä½¿å¾—ä¸šåŠ¡å’Œåº”ç”¨åˆ†ç¦»ã€‚åœ¨å¾®æœåŠ¡ä¹‹å‰ï¼Œå¤§å®¶æ™®éçš„åšæ³•æ˜¯å°†ä¸åŒçš„ç³»ç»Ÿåšæˆä¸åŒçš„åº”ç”¨ï¼Œç„¶åé€šè¿‡æŸäº›æ‰‹æ®µè¿›è¡Œé€šä¿¡ã€‚è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹å°±æ˜¯åº”ç”¨æœ‰å¾ˆå¤šé‡å¤å†—ä½™çš„é€»è¾‘å’Œä»£ç ã€‚è€Œå¾®æœåŠ¡åˆ™ä¸åŒï¼Œå¾®æœåŠ¡å°†ç³»ç»Ÿæ‹†åˆ†æˆè¶³å¤Ÿå°çš„å—ï¼Œè¿™æ ·èƒ½å¤Ÿæ˜¾è‘—å‡å°‘å†—ä½™ã€‚æœåŠ¡åŒ–æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

* åº”ç”¨æŒ‰ä¸šåŠ¡æ‹†åˆ†æˆæœåŠ¡
* æœåŠ¡å¯ç‹¬ç«‹éƒ¨ç½²
* æœåŠ¡å¯è¢«å¤šä¸ªåº”ç”¨å…±äº«
* æœåŠ¡ä¹‹é—´å¯ä»¥é€šä¿¡

è¿™é‡Œå¹¶ä¸æ‰“ç®—è®¨è®ºæœåŠ¡æ²»ç†çš„å…·ä½“å®æ–½ç»†èŠ‚ï¼Œä½†æ˜¯éœ€è¦æ˜ç™½çš„æ˜¯é€šè¿‡è¿™ç§å¾®æœåŠ¡çš„æ€æƒ³ã€‚æˆ‘ä»¬éœ€è¦é€šçŸ¥æœåŠ¡ï¼Œåªéœ€è¦å‘é€ä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰é€šçŸ¥æœåŠ¡ï¼Œé€šçŸ¥æœåŠ¡è¿”å›ä¸€ä¸ªä¿¡å·ï¼Œè¡¨ç¤ºè¾“å‡ºçš„ç»“æœã€‚æ¯”å¦‚æˆ‘éœ€è¦æ¥å…¥é‚®ä»¶æœåŠ¡è¿™ä¸ªé€šçŸ¥æœåŠ¡ã€‚ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·çš„:

```javascript
'use strict';
const nodemailer = require('nodemailer');
const promisify = require('promisify')

// Generate test SMTP service account from ethereal.email
// Only needed if you don't have a real mail account for testing
exports default mailer = async context => {

    // create reusable transporter object using the default SMTP transport
    let transporter = nodemailer.createTransport({
        host: 'smtp.ethereal.email',
        port: 587,
        secure: false, // true for 465, false for other ports
        auth: {
            user: account.user, // generated ethereal user
            pass: account.pass  // generated ethereal password
        }
    });

    // setup email data with unicode symbols
    let mailOptions = {
        from: '"Fred Foo ğŸ‘»" <foo@blurdybloop.com>', // sender address
        to: 'bar@blurdybloop.com, baz@blurdybloop.com', // list of receivers
        subject: 'Hello âœ”', // Subject line
        text: 'Hello world?', // plain text body
        html: '<b>Hello world?</b>' // html body
    };

    // send mail with defined transport object
    await promisify(transporter.sendMail(mailOptions, (error, info) => {
        if (error) {
            return console.log(error);
        }
        console.log('Message sent: %s', info.messageId);
        // Preview only available when sending through an Ethereal account
        console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info));

        // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@blurdybloop.com>
        // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...

    }));

    return {
           status: 200,
           body: 'send sucessfully',
           headers: {
               'Foo': 'Bar'
           }
      }
};
```

å¦‚æœæ¯ä¸€ä¸ªåº”ç”¨éœ€è¦ä½¿ç”¨é‚®ä»¶æœåŠ¡ï¼Œå°±éœ€è¦å†™è¿™æ ·çš„ä¸€å †ä»£ç ï¼Œå¦‚æœå…¬å¸çš„ç³»ç»Ÿä¸åŒå¯¼è‡´è¯­è¨€ä¸åŒï¼Œè¿˜éœ€è¦åœ¨ä¸åŒè¯­è¨€éƒ½å®ç°ä¸€éï¼Œå¾ˆéº»çƒ¦ï¼Œè€Œå¦‚æœå°†å‘é€é‚®ä»¶æŠ½è±¡æˆé€šçŸ¥æœåŠ¡çš„å…·ä½“å®ç°ï¼Œå°±å¯ä»¥å‡å°‘å†—ä½™ä»£ç ï¼Œç”šè‡³javaä¹Ÿå¯ä»¥è°ƒç”¨æˆ‘ä»¬ä¸Šé¢ç”¨jså†™çš„é‚®ä»¶æœåŠ¡äº†ã€‚

> å°æç¤ºã€‚å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨é‚®ä»¶æœåŠ¡çš„æ—¶å€™ï¼Œæœ€å¥½ä¸è¦åœ¨ä»£ç ä¸­ç›´æ¥å‘é‚®ä»¶æœåŠ¡å‘é€æ¶ˆæ¯ï¼Œè€Œæ˜¯å‘é€šçŸ¥æœåŠ¡è¿™ç§æŠ½è±¡å±‚æ¬¡æ›´é«˜çš„æœåŠ¡å‘é€ã€‚

æœ‰ä¸€ä¸ªæµè¡Œçš„æ¦‚å¿µæ˜¯faas\(function as a service\)ã€‚å®ƒå¾€å¾€å’Œæ— æœåŠ¡ä¸€èµ·è¢«è°ˆèµ·ï¼Œæ— æœåŠ¡ä¸æ˜¯è¯´æ²¡æœ‰æœåŠ¡å™¨ï¼Œè€Œæ˜¯å°†æœåŠ¡æ¶æ„é€æ˜ï¼Œå¯¹äºæ™®é€šå¼€å‘è€…æ¥è¯´å°±å¥½åƒæ²¡æœ‰æœåŠ¡å™¨ä¸€æ ·ï¼Œè¿™æ ·å°±å¯ä»¥å°†æˆ‘ä»¬ä»æœåŠ¡å™¨ç¯å¢ƒä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºé€»è¾‘æœ¬èº«ã€‚fission\(Fast Serverless Functions for Kubernetes\)æ˜¯ä¸€ä¸ªåŸºäºk8sçš„æ— æœåŠ¡æ¡†æ¶ã€‚é€šè¿‡å®ƒå¼€å‘è€…å¯ä»¥åªå…³æ³¨é€»è¾‘æœ¬èº«ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†ä¸Šé¢çš„mailæ–¹æ³•ä½œä¸ºéƒ¨ç½²å•å…ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```bash
  $ fission env create --name nodejs --image fission/node-env

  $ curl https://notification.severless.com/mailer.js > mailer.js

  # Upload your function code to fission
  $ fission function create --name mailer --env nodejs --code mailer.js

  # Map GET /mailer to your new function
  $ fission route create --method GET --url /mailer --function mailer

  # Run the function.  This takes about 100msec the first time.

  $ curl -H "Content-Type: application/json" -X POST -d '{"user":"user", "pass": "pass"}' http://$FISSION_ROUTER/mailer
```

è¿™æ ·å¦‚æœæœ‰ä¸€ä¸ªç³»ç»Ÿéœ€è¦å°†maileræœåŠ¡åˆ‡æ¢æˆsmsæœåŠ¡å°±å¾ˆç®€å•äº†ï¼š

```javascript
  $ fission env create --name nodejs --image fission/node-env

  $ curl https://notification.severless.com/sms.js > sms.js

  # Upload your function code to fission
  $ fission function create --name sms --env nodejs --code sms.js

  # Map GET /mailer to your new function
  $ fission route create --method GET --url /sms --function sms

  # Run the function.  This takes about 100msec the first time.

  $ curl -H "Content-Type: application/json" -X POST -d '{"user":"user", "pass": "pass"}' http://$FISSION_ROUTER/sms
```

æœåŠ¡çš„å®ç°ä¹Ÿè¶³å¤Ÿç®€å•ï¼Œåªéœ€è¦å…³å¿ƒå…·ä½“é€»è¾‘å°±OKäº†ã€‚

## è‡ªåŠ¨åŒ–è„šæœ¬

### å“ªäº›åœ°æ–¹åº”è¯¥è‡ªåŠ¨åŒ–

ä¸Šé¢è®²è¿°äº†è½¯ä»¶å¼€å‘çš„è¿‡ç¨‹ï¼Œä»¥åŠæˆ‘ä»¬å¯ä»¥å°†å“ªäº›è¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬è®²è¿°è‡ªåŠ¨åŒ–çš„ç¬¬äºŒéƒ¨åˆ†è‡ªåŠ¨åŒ–è„šæœ¬ã€‚åˆ¨é™¤è½¯ä»¶å¼€å‘æœ¬èº«ï¼Œè®¡ç®—æœºä¸­å…¶å®ä¹Ÿå……æ»¡äº†é‡å¤æ€§å·¥ä½œï¼ŒåŒæ ·ä¹Ÿå……æ»¡äº†è§£å†³è¿™äº›é‡å¤å·¥ä½œçš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆå¯ä»¥æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªè½¯ä»¶æˆ–è€…æ’ä»¶ç­‰ï¼Œæ€»ä¹‹å®ƒå°†äººä»¬ä»é‡å¤æ€§çš„å·¥ä½œä¸­è§£è„±äº†å‡ºæ¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬éƒ½æœ‰è¿‡ä¸‹è½½è§†é¢‘çš„ç»å†ï¼Œæˆ‘ä»¬çœ‹ä¸Šäº†æŸä¸ªç½‘ä¸Šçš„ä¸€ä¸ªè§†é¢‘ï¼Œæˆ‘ä»¬æƒ³ä¸‹è½½ä¸‹æ¥ï¼Œä½†æ˜¯åœ¨ä¸‹è½½çš„æ—¶å€™ï¼Œå‘ç°åªæœ‰VIPå¯ä»¥ä¸‹è½½ã€‚æˆ‘ä»¬å°±å»ç½‘ä¸ŠæŸ¥æ‰¾è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æŒ‰ç…§æ•™ç¨‹å†ç»åƒè¾›ä¸‡è‹¦ç»ˆäºå°†è§†é¢‘ä¸‹è½½äº†ä¸‹æ¥ã€‚ä¸‹æ¬¡æˆ‘ä»¬åˆè¦ä¸‹è½½è§†é¢‘äº†ï¼Œæˆ‘ä»¬è¿˜è¦ç»å†äº†ä¸Šé¢çš„æ­¥éª¤ï¼ˆæˆ‘ä»¬ç”šè‡³è¿˜è¦å†çœ‹ä¸€éæ•™ç¨‹ï¼‰ã€‚äºæ˜¯è‡ªåŠ¨ä¸‹è½½åœ¨çº¿ç½‘ç«™è§†é¢‘çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ³•å‡ºç°äº†ï¼Œäººä»¬åªéœ€è¦ç®€å•çš„æ“ä½œå°±å¯ä»¥å°†è‡ªå·±å¿ƒçˆ±çš„è§†é¢‘ä¸‹è½½ä¸‹æ¥ï¼Œå¤šä¹ˆçœå¿ƒï¼ç±»ä¼¼çš„è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æ‰¹é‡å¤„ç†å·¥å…·ï¼Œä¸€é”®é‡è£…ç³»ç»Ÿå·¥ä½œç­‰ç­‰ï¼Œæ ¹æœ¬æ•°ä¸è¿‡æ¥ã€‚

æœ¬è´¨ä¸Šï¼Œä»»ä½•åº”è¯¥è‡ªåŠ¨åŒ–çš„éƒ½åº”è¯¥è¢«è‡ªåŠ¨åŒ–ã€‚åªè¦æ˜¯é‡å¤æ€§å·¥ä½œï¼Œéƒ½åº”è¯¥å°†å…¶è‡ªåŠ¨åŒ–ã€‚ä¸ºä»€ä¹ˆç”µè„‘å¯ä»¥å¤„ç†çš„ä¸œè¥¿ï¼Œéè¦äººå·¥æ¥å¤„ç†å‘¢ï¼Ÿå¼€å‘è€…åº”è¯¥å°†ç²¾åŠ›èŠ±è´¹åœ¨æ›´å€¼å¾—èŠ±è´¹çš„åœ°æ–¹ï¼Œä¸€äº›æœ‰åˆ›é€ æ€§çš„å·¥ä½œä¸Šã€‚ä¸Šé¢ä»‹ç»äº†æ™®é€šç”¨æˆ·çš„ä¾‹å­ï¼Œç°åœ¨æˆ‘ä¸¾ä¸€ä¸ªå·¥ä½œä¸­çš„ä¾‹å­ã€‚æ¯”å¦‚ä¹‹å‰æˆ‘çš„å…¬å¸çš„å‘å¸ƒï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„æµç¨‹ï¼Œæ¯æ¬¡å‘å¸ƒéƒ½è¦æŒ‰ç…§æµç¨‹æ‰§è¡Œï¼Œè¿™å°±å¾ˆé€‚åˆå»è‡ªåŠ¨åŒ–ã€‚æˆ‘ä»¬å½“æ—¶çš„å‘å¸ƒæµç¨‹æ˜¯è¿™æ ·çš„

```bash
git tag publish/ç‰ˆæœ¬å· 
git push origin publish/ç‰ˆæœ¬å·
```

ç„¶åå»cdnï¼ˆ[https://g.alicdn.com/dingding/react-hrm-h5/version/index.jsï¼‰](https://g.alicdn.com/dingding/react-hrm-h5/version/index.jsï¼‰) ä¸ŠæŸ¥çœ‹æ˜¯å¦å‘å¸ƒæˆåŠŸã€‚ æˆ‘è§‰å¾—è¿™å·²ç»èŠ±è´¹æˆ‘ä¸€å®šçš„æ—¶é—´äº†ï¼Œè€Œä¸”æ–°æ¥çš„åŒå­¦ä¸å¾—ä¸å­¦ä¹ è¿™ç§ç¹ççš„ä¸œè¥¿ã€‚ ä¸ºä»€ä¹ˆä¸èƒ½è‡ªåŠ¨åŒ–å‘¢ï¼Ÿ å€Ÿç”¨å¢¨è²å®šå¾‹ä¸‹ï¼Œ è¯¥è‡ªåŠ¨åŒ–çš„ç»ˆå°†å®ç°è‡ªåŠ¨åŒ–ã€‚ è‡ªåŠ¨åŒ–çœŸçš„ä¸æ­¢æ˜¯å‡å°‘æ—¶é—´ï¼Œæ›´é‡è¦çš„æ˜¯å‡å°‘å‡ºé”™çš„å¯èƒ½ã€‚ è½¯ä»¶å·¥ç¨‹é¢†åŸŸæœ‰è¿™ä¹ˆä¸€å¥è¯ï¼Œå‡å°‘bugæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å°‘å†™ä»£ç ä»¥è‡³äºæ²¡æœ‰æ˜æ˜¾bugã€‚ äºŒæ˜¯å†™å¾ˆå¤šä»£ç ä»¥è‡³äºæ²¡æœ‰æ˜æ˜¾bugã€‚

> å°‘å†™ä»£ç ï¼Œå°‘åšé‡å¤çš„äº‹ï¼Œè¿™æ˜¯æˆ‘çš„ä¿¡æ¡ã€‚

å¦‚æœä½ è®¤çœŸè§‚å¯Ÿçš„è¯ï¼Œä½ ä¼šå‘ç°å¯ä»¥è‡ªåŠ¨åŒ–çš„ä¸œè¥¿å®åœ¨æ˜¯å¤ªå¤šäº†ã€‚å½“ä½ çœŸæ­£å°†è‡ªåŠ¨åŒ–è´¯å½»åˆ°å®é™…ç¼–ç ç”Ÿæ´»ä¸­å»çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä½ èŠ±è´¹åœ¨é‡å¤å·¥ä½œä¸Šçš„æ—¶é—´åœ¨ç¼©å°‘ï¼Œå¹¶ä¸”ä½ çš„å¹¸ç¦æ„Ÿä¼šæå‡ï¼Œä½ ä¼šå¾ˆæœ‰æˆå°±æ„Ÿã€‚ä¹‹å‰çœ‹è¿‡ä¸€ä¸ªæ–‡ç« ï¼Œæ–‡ç« é‡Œé¢è¯´å®ƒä¼šå°†ä»»ä½•å¯ä»¥è‡ªåŠ¨åŒ–çš„ä¸œè¥¿è‡ªåŠ¨åŒ–ï¼ˆä¸ä»…é™äºå·¥ä½œï¼‰ï¼Œå®ƒä¼šç¼–ç æ§åˆ¶å¦‚æœåœ¨æ™šä¸Šä¸‹ç­çš„æ—¶å€™ï¼Œè‡ªå·±çš„sessionè¿˜åœ¨çš„è¯ï¼ˆè¿˜æ²¡ä¸‹ç­ï¼‰ï¼Œå°±å‘è‡ªåŠ¨ç»™è€å©†å‘çŸ­ä¿¡ï¼ŒçŸ­ä¿¡å†…å®¹æ˜¯ä»é¢„å…ˆè®¾ç½®å¥½çš„çŸ­è¯­ä¸­éšæœºé€‰å–çš„ã€‚

> ä¹‹å‰æˆ‘åœ¨å¾®åšä¸Šçœ‹åˆ°ä¸€ä¸ªç ”ç©¶ï¼Œå®ƒé€šè¿‡åˆ†æå¥³æœ‹å‹çš„å¾®åšï¼Œæ¥åˆ†æå¥³æœ‹å‹çš„æƒ…ç»ªã€‚æˆ‘è§‰å¾—ä¸Šé¢å‘é€çŸ­ä¿¡çš„æ—¶å€™ï¼Œå¦‚æœå¯ä»¥æ ¹æ®è€å©†çš„æƒ…ç»ªå¯¹åº”æ™ºèƒ½å›å¤ä¸åŒå†…å®¹ä¼šæ›´æ£’ã€‚

### è¿ç»´

å¦‚æœå¤§å®¶æœ‰è¿ç»´ç»éªŒçš„è¯ï¼Œä¼šçŸ¥é“è¿ç»´ç»å¸¸éœ€è¦å¼€å¯ï¼Œåœæ­¢ï¼Œé‡å¯æœåŠ¡ã€‚è¿™äº›å·¥ä½œæœ‰å¾ˆå¼ºçš„è§„å¾‹æ€§ï¼Œå¾ˆé€‚åˆåšè‡ªåŠ¨åŒ–ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å€ŸåŠ©shellï¼Œå¯ä»¥ä¸æ“ä½œç³»ç»Ÿæ·±åº¦å¯¹è¯ï¼Œè½»æ¾å®ç°ä¸Šé¢æåˆ°çš„è¿ç»´éœ€æ±‚ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªshellè„šæœ¬å®ç°æœåŠ¡å¯åŠ¨ï¼Œåœæ­¢å’Œé‡å¯çš„ä¾‹å­ã€‚

```bash
#! /bin/sh
DIR= `pwd`;
NODE= `which node`

// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯actionï¼Œæ˜¯startï¼Œstopå’Œrestartä¸­çš„ä¸€ä¸ªã€‚
ACTION=$1

# utils
get_pid() {
   echo `ps x|grep my-server-name  |awk '{print $1}'`
}

# å¯åŠ¨
start() {
 pid= `get_pid`;

 if [ -z $pid ]; then
   echo 'server is already running';
 else
   $NODE $DIR/server.js 2>&1 &
   echo 'server is running now'
 fi
}
// stopå’Œrestartä»£ç çœç•¥
case "$ACTION" in
   start)
      start
   ;;
   stop)
      stop
   ;;
 esac
```

å€ŸåŠ©shellå¼ºå¤§çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè¿˜æœ‰å°†æ•°æ®æŠ½è±¡æˆæµï¼Œå¹¶é€šè¿‡ç»„åˆæµå®Œæˆå¤æ‚ä»»åŠ¡çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºéå¸¸å¤æ‚çš„è„šæœ¬ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†æ£€æµ‹ä¸‰æ–¹åº“æ½œåœ¨é£é™©ä¿¡æ¯åŠŸèƒ½åšæˆè„šæœ¬ï¼Œç„¶åé›†æˆåˆ°CIä¸­ï¼Œåªæœ‰æƒ³ä¸åˆ°ï¼Œæ²¡åšåšä¸åˆ°ã€‚è¿™é‡Œåªæ˜¯ç»™å¤§å®¶æä¾›æ€è·¯ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥æ ¹æ®è¿™ä¸ªæ€è·¯è¿›è¡Œå»¶ä¼¸ï¼Œä»è€Œå°†ä¸€åˆ‡åº”è¯¥è¢«è‡ªåŠ¨åŒ–çš„ä¸œè¥¿å…¨éƒ¨è‡ªåŠ¨åŒ–ã€‚

### å¼€å‘æµç¨‹è‡ªåŠ¨åŒ–

ä¸Šé¢è®²è¿°äº†å“ªäº›åœ°æ–¹åº”è¯¥è¢«è‡ªåŠ¨åŒ–ã€‚å¤§å®¶çœ‹äº†åå¾ˆå¯èƒ½æ˜¯æ‹¿äº†é”¤å­çš„ç–¯å­ï¼Œä½ ä¼šå‘ç°æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯é’‰å­ï¼Œæ˜¯ä¸æ˜¯ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥è‡ªåŠ¨åŒ–ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼ å¯ä»¥è‡ªåŠ¨åŒ–çš„åº”è¯¥æ˜¯æœ‰ç€æå¼ºè§„å¾‹çš„æ¯ç‡¥æ´»åŠ¨ï¼Œè€Œå……æ»¡åˆ›æ–°çš„ä»»åŠ¡è¿˜æ˜¯è¦è®©å¼€å‘è€…è‡ªå·±äº«å—ã€‚å› æ­¤å½“ä½ è§‰å¾—æŸé¡¹å·¥ä½œæ¯ç‡¥æ— å‘³ï¼Œå¹¶ä¸”æœ‰ç€å¾ˆå¼ºçš„è§„å¾‹å’Œåˆ¤åˆ«æŒ‡æ ‡çš„æ—¶å€™å°±æ˜¯ä½ æ‹¿èµ·æ‰‹é‡Œé”¤å­çš„æ—¶å€™ã€‚æ¯”å¦‚æˆ‘æ¯å¤©éƒ½è¦å›æŠ¥æˆ‘çš„å·¥ä½œï¼Œå°†è‡ªå·±çš„è¿›åº¦åŒæ­¥ç»™ç»„é‡Œå…¶ä»–äººï¼Œè™½ç„¶å¾ˆæ¯ç‡¥ä¹å‘³ï¼ˆå¸Œæœ›æˆ‘çš„é¢†å¯¼ä¸ä¼šçœ‹åˆ°ï¼‰ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§„å¾‹æ€§ã€‚å› æ­¤ä¸åº”è¯¥è¢«è‡ªåŠ¨åŒ–ã€‚

è¿™é‡Œå†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚æˆ‘å°†å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦å¤„ç†çš„äº‹æƒ…è¿›è¡Œäº†åˆ†ç±»ï¼Œæˆ‘ç§°ä¸ºå…ƒè„šæœ¬ï¼ˆmeta-scriptï¼‰ï¼Œåˆ†åˆ«æœ‰å¦‚ä¸‹å†…å®¹ï¼š

1. concat-readme \(å°†é¡¹ç›®ä¸­æ‰€æœ‰çš„readmeç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„readme\)
2. generate-changelog ï¼ˆæ ¹æ®commit msg ç”Ÿæˆ changelogï¼‰
3. serve-markdown ï¼ˆæ ¹æ®markdownç”Ÿæˆé™æ€ç½‘ç«™ï¼‰
4. lint ï¼ˆä»£ç è´¨é‡æ£€æµ‹ï¼‰
5. start server ï¼ˆå¼€å¯å¼€å‘æœåŠ¡å™¨ï¼‰
6. stop server ï¼ˆåœæ­¢è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼‰
7. restart server ï¼ˆé‡å¯å¼€å‘æœåŠ¡å™¨ï¼‰
8. start-attach ï¼ˆattachåˆ°æµè§ˆå™¨ï¼Œä»¥åœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œè°ƒè¯•ï¼‰

æ¯ä¸€ä¸ªmeta-scriptéƒ½æ˜¯ä¸€ä¸ªå°çš„è„šæœ¬æˆ–è€…ä¸€ä¸ªå¤–éƒ¨åº“ï¼ˆexternal libraryï¼‰ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯npmä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼Œå› æ­¤æˆ‘å°†meta-scriptæ”¾åˆ°äº†package.jsonæ–‡ä»¶ä¸­çš„scripté‡Œé¢ã€‚è¿™æ ·æˆ‘å°±å¯ä»¥é€šè¿‡è¿è¡Œ`npm run xxx` æ‰§è¡Œå¯¹åº”çš„è„šæœ¬æˆ–è€…å¤–éƒ¨åº“äº†ã€‚ä½†æ˜¯åˆ«å¿˜äº†ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åšä¸€äº›å¤æ‚çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æˆ‘éœ€è¦åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡¹ç›®ä¸­æ‰€æœ‰çš„readmeã€‚é‚£ä¹ˆæˆ‘éœ€è¦å…ˆæŠŠé¡¹ç›®ä¸­çš„readmeå…¨éƒ¨concatèµ·æ¥ï¼Œç„¶åå°†concatçš„å†…å®¹ä½œä¸ºæ•°æ®æºï¼Œä¼ ç»™serve-markdownï¼Œç„¶åserve-markdownä¼ ç»™start-serverã€‚ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·çš„:

```bash
npm run concat-readme > npm run serve-markdown > npm run start-server --port 1089
```

æˆ‘ç§°ä¸Šé¢çš„ä»£ç taskï¼Œç„¶åæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç ä¹Ÿæ”¾åˆ°package.jsonçš„scriptä¸­ï¼Œä¼¼ä¹è¿™ç§åšæ³•å¾ˆå¥½åœ°è§£å†³äº†é—®é¢˜ã€‚ä½†æ˜¯å®ƒæœ‰å‡ ä¸ªç¼ºç‚¹ã€‚

* meta-script å’Œ task æ··æ‚åœ¨ä¸€èµ·ï¼Œè¿™æ ·æœ¬èº«å¹¶ä¸å¯æ€•ï¼Œä½†æ˜¯æ­¤æ—¶å¹¶ä¸æ˜¯æ‰€æœ‰çš„scriptéƒ½å¯ä»¥å¾ˆå¥½é‡ç”¨ï¼Œæˆ‘ä»¬çš„taskå¹¶ä¸æ˜¯ä¸ºäº†é‡ç”¨ã€‚
* package.jsonæ˜¯ä½œä¸ºç‰ˆæœ¬æ§åˆ¶çš„ä¸€éƒ¨åˆ†å­˜åœ¨ï¼Œå¦‚æœæŸä¸ªå¼€å‘è€…å¸Œæœ›æ ¹æ®è‡ªå·±çš„æƒ…å†µå®šåˆ¶ä¸€ä¸ªtaskï¼Œå°±ä¸åº”è¯¥æ”¾åˆ°è¿™é‡Œäº†ã€‚

å› æ­¤æˆ‘çš„åšæ³•æ˜¯å°†meta-scriptæ”¾åˆ°ç‰ˆæœ¬åº“ï¼ˆè¿™ä¸ªä¾‹å­æˆ‘ä»¬æ”¾åˆ°äº†package.jsonä¸­ï¼‰ï¼Œç„¶åå°†taskæ”¾åˆ°ç¼–è¾‘å™¨ä¸­æ§åˆ¶ã€‚æˆ‘ä½¿ç”¨çš„ç¼–è¾‘å™¨æ˜¯VSCODEï¼Œå®ƒæœ‰ä¸€ä¸ªtask manageråŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½ç¬¬ä¸‰æ–¹æ’ä»¶è¿›è¡Œæ‰©å±•ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰taskï¼Œæ¯”å¦‚ä¸Šé¢çš„æˆ‘ä»¬å¯ä»¥ä½œä¸ºä¸ªäººé…ç½®ä¿å­˜èµ·æ¥ï¼Œå‘½åä¸ºstart doc-siteã€‚

æˆ‘ä»¬å¯ä»¥ç»§ç»­ç»„åˆï¼š

```bash
npm run changelog > npm run serve-markdown > npm run start-server --port 1089
```

æˆ‘ä»¬é€šè¿‡meta-scriptåˆå¢åŠ äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„taskï¼Œæˆ‘ä»¬å¯ä»¥å‘½åä¸ºstart changelog-siteã€‚

è¿˜æœ‰æ›´å¤šï¼š

```bash
npm run stop > npm run start-attach
```

æˆ‘ä»¬åˆå®ç°äº†ä¸€ä¸ªâ€œæ”¾å¼ƒâ€æµè§ˆå™¨è°ƒè¯•ï¼Œè€Œç”¨editorè°ƒè¯•çš„taskï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºeditor-debugã€‚

æˆ‘ä»¬å¯ä»¥å¢åŠ æ›´å¤šçš„meta-scriptï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®meta-scriptç»„åˆæ›´å¤štaskã€‚ç„¶åæˆ‘ä»¬åªéœ€è¦one-keyå°±å¯ä»¥å®ç°ä»»æ„ä¸­ç»„åˆçš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ£’ï¼Ÿè‡ªå·±åŠ¨æ‰‹è¯•è¯•æŠŠï¼

### æ— å¤„ä¸åœ¨çš„è‡ªåŠ¨åŒ–

ä¸Šé¢ä¸¾çš„ä¾‹å­æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼€å‘æµç¨‹ï¼Œé‚£ä¹ˆå…¶ä»–æ—¥å¸¸çš„è‡ªåŠ¨åŒ–æ€ä¹ˆå»åšå‘¢ï¼Ÿæ¯”å¦‚æˆ‘è¦æ§åˆ¶ç”µè„‘å‘é€é‚®ä»¶ï¼Œæ¯”å¦‚æˆ‘è¦æ§åˆ¶ç”µè„‘ç¡çœ ï¼Œæˆ‘è¦è°ƒæ•´ç”µè„‘çš„éŸ³é‡ç­‰ã€‚è™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ€è·¯ï¼Œå†™ä¸€ä¸ªå…ƒè„šæœ¬ï¼Œç„¶åå°†å…ƒè„šæœ¬ç»„åˆã€‚ä½†æ˜¯è¿™é‡Œçš„å…ƒè„šæœ¬ä¼¼ä¹å¹¶ä¸èƒ½é€šè¿‡nodeçš„cliç¨‹åºæˆ–è€…shellè„šæœ¬å®ç°ã€‚ä½†æ˜¯è¿™æ°å¥½æ˜¯è‡ªåŠ¨åŒ–å¿…ä¸å¯å°‘çš„ä¸€ç¯ã€‚å› æ­¤æˆ‘ä»¬é¢ä¸´ä¸€ä¸ªGUIçš„è‡ªåŠ¨åŒ–è¿è¡Œè¿‡ç¨‹ï¼Œå°†æˆ‘ä»¬ç¹çé‡å¤çš„UIå·¥ä½œä¸­è§£è„±å‡ºæ¥ã€‚è¿™é‡Œä»‹ç»åœ¨macä¸‹è‡ªåŠ¨åŒ–çš„ä¾‹å­ã€‚

#### JXA

è¯´åˆ°macä¸­è‡ªåŠ¨åŒ–ï¼Œjxaæ˜¯ä¸€ç§ä½¿ç”¨javaScriptä¸macä¸­çš„appè¿›è¡Œé€šè®¯çš„æŠ€æœ¯ã€‚é€šè¿‡å®ƒå¼€å‘è€…å¯ä»¥é€šè¿‡jsè·å–åˆ°appçš„å®ä¾‹ï¼Œä»¥åŠå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ã€‚é€šè¿‡jxaæˆ‘ä»¬å¯ä»¥è½»æ¾é€šè¿‡JavaScriptæ¥è‡ªåŠ¨åŒ–è„šæœ¬å®Œæˆè¯¸å¦‚ç»™æŸäººå‘é€é‚®ä»¶ï¼Œæ‰“å¼€ç‰¹å®šè½¯ä»¶ï¼Œè·å–iTunesçš„æ’­æ”¾ä¿¡æ¯ç­‰åŠŸèƒ½ã€‚ä¸‹é¢ä¸¾ä¸ªå‘é€é‚®ä»¶çš„ä¾‹å­ï¼š

```javascript
const Mail = Application("Mail");

const body = "body";

let message = Mail.OutgoingMessage().make();
message.visible = true;
message.content = body;
message.subject = "Hello World";
message.visible = true;

message.toRecipients.push(Mail.Recipient({address: "a@duiba.com.cn", name: "zhangsan"}));
message.toRecipients.push(Mail.Recipient({address: "b@duiba.com.cn", name: "lisi"}));

message.attachments.push(Mail.Attachment({ fileName: "/Users/lucifer/Downloads/sample.txt"}));

Mail.outgoingMessages.push(message);
Mail.activate();
```

æœ‰ä¸¤ç§æ–¹å¼è¿è¡Œä¸Šé¢çš„ä¾‹å­ï¼Œä¸€ç§æ˜¯å‘½ä»¤è¡Œæ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥ä½œä¸ºè„šæœ¬è¿è¡Œã€‚

1. å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œ

```bash
osascript -l JavaScript -e 'Application("iTunes").isrunning()'
```

1. ä½œä¸ºè„šæœ¬è¿è¡Œ

ä¸€ç§æ–¹å¼æ˜¯ä¿å­˜ä¸ºæ–‡ä»¶ä¹‹åè¿è¡Œ

```bash
osascript /Users/luxiaopeng/jxa/hello.js
```

å¦ä¸€ç§æ˜¯ç”¨è‹¹æœè‡ªå¸¦çš„è„šæœ¬ç¼–è¾‘å™¨ï¼š

![&#x56FE;3.8](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.8.png)

è¿è¡Œä¹‹åæ•ˆæœæ˜¯è¿™æ ·çš„ï¼š

![&#x56FE;3.7](https://github.com/azl397985856/automate-everything/master/illustrations/%20å›¾3.7.png)

jxaæä¾›äº†ä¸°å¯Œçš„apiä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚è¯¦ç»†å¯ä»¥æŸ¥çœ‹è„šæœ¬ç¼–è¾‘å™¨-æ–‡ä»¶-å­—å…¸ï¼š

![&#x56FE;3.9](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.9.png)

æ¯”å¦‚æˆ‘è¦æŸ¥çœ‹dashçš„apiï¼š

![&#x56FE;3.10](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.10.png)

ä½†æ˜¯é—æ†¾çš„æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„appéƒ½æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„apiï¼Œæ¯”å¦‚é’‰é’‰ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¨‹åºéƒ½æœ‰å­—å…¸ï¼Œæ¯”å¦‚qqï¼Œå¾®ä¿¡ã€‚å¥½æ¶ˆæ¯æ˜¯macè‡ªå¸¦çš„ç¨‹åºæ¥å£è¿˜æ˜¯æ¯”è¾ƒä¸°å¯Œçš„ã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬æƒ³è¦å®ç°æŸäº›åŠŸèƒ½ï¼Œè¿˜æ˜¯ä¼šæ¯”è¾ƒå¤æ‚ã€‚å¯¹äºä¸æƒ³å¤ªæ·±å…¥äº†è§£å¹¶ä¸”æƒ³è¦è‡ªåŠ¨åŒ–çš„å¼€å‘è€…æ¥è¯´ä¸€æ¬¾ç®€å•çš„å·¥å…·æ˜¯æœ‰å¿…è¦çš„ï¼Œä¸‹é¢æˆ‘ä»‹ç»ä¸€æ¬¾åœ¨macä¸‹çš„ç¥å™¨ã€‚

#### Alfred

JXAçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å…¶åŠŸèƒ½æ¯”è¾ƒç¹çã€‚å¦‚æœä½ åªæ˜¯æƒ³ç®€å•åœ°å†™ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œåšä¸€äº›ç®€å•çš„äº†è§£ã€‚ä»‹ç»å¤§å®¶ä¸€ä¸ªæ›´åŠ ç®€å•å´ä¸å¤±å¼ºå¤§çš„å·¥å…·-alfred- workflowã€‚ ä½ å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„å·¥ä½œæµï¼Œæ”¯æŒGUIï¼Œshellè„šæœ¬ç”šè‡³å‰é¢æåˆ°çš„jxaå†™å·¥ä½œæµã€‚å…¶ç®€å•æ˜“ç”¨æ€§ï¼Œä»¥åŠå…¶ç‹¬ç‰¹çš„æµå¼å¤„ç†ï¼Œå„ç§ç»„åˆç‰¹æ€§ä½¿å¾—å®ƒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚ä¸‹é¢æ˜¯æˆ‘çš„alfred-workflowï¼š

![&#x56FE;3.11](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.11.png)

ä½ å¯ä»¥åƒæˆ‘æ‹†åˆ†å¼€å‘æµç¨‹ä¸€æ ·å°†ä½ çš„å·¥ä½œæµæ‹†è§£ï¼Œæ¯ä¸€éƒ¨åˆ†å®ç°è‡ªå·±çš„åŠŸèƒ½ï¼Œè®¾ç½®è¯­è¨€å¯ä»¥ä¸ä¸€æ ·ã€‚æ¯”å¦‚å¤„ç†ç”¨æˆ·è¾“å…¥ç”¨bashï¼Œç„¶åbashå°†è¾“å…¥æµé‡å®šå‘åˆ°perlè„šæœ¬ç­‰éƒ½æ˜¯å¯ä»¥çš„ã€‚ alfred-workflowå¯ä»¥å…è®¸ä½ ç®€å•åœ°æ·»åŠ æ–‡ä»¶æ“ä½œï¼Œwebæ“ä½œï¼Œå‰ªè´´æ¿ç­‰ï¼Œè®¾ç½®ä¸ç”¨å†™ä»»ä½•ä»£ç ã€‚

![&#x56FE;3.12](https://github.com/azl397985856/automate-everything/master/illustrations/å›¾3.12.png)

## æ€»ç»“

æœ¬ç« é€šè¿‡å‰ç«¯å·¥ä½œæµç¨‹å…¥æ‰‹ï¼Œè®²è§£äº†å‰ç«¯å¼€å‘ä¸­çš„å·¥ä½œï¼Œå¹¶ä¸”è¯•å›¾å°†å…¶ä¸­å¯ä»¥è‡ªåŠ¨åŒ–çš„æ­¥éª¤è¿›è¡Œè‡ªåŠ¨åŒ–é›†æˆã€‚ç„¶åè®²è¿°äº†å®Œå–„çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–å¹³å°ç³»ç»Ÿæ˜¯æ€æ ·çš„ï¼Œä»¥åŠå„ä¸ªå­ç³»ç»Ÿå®ç°çš„å…·ä½“æ€è·¯æ˜¯æ€æ ·çš„ï¼Œé€šè¿‡æˆ‘çš„è®²è§£ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶åº”è¯¥å·²ç»ç†è§£äº†è‡ªåŠ¨åŒ–çš„å·¥ä½œå†…å®¹ï¼Œç”šè‡³å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ­å»ºä¸€ä¸ªç®€å•çš„è‡ªåŠ¨åŒ–å¹³å°äº†ã€‚ä½†æ˜¯ç¨‹åºå‘˜ä¸­çš„è‡ªåŠ¨åŒ–è¿œä¸æ­¢å°†å®ç°éœ€æ±‚çš„æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæˆ‘ä»¬è¿˜ä¼šæä¸€äº›æé«˜æ•ˆç‡çš„å°å·¥å…·ï¼Œæœ¬è´¨ä¸Šå®ƒä»¬ä¹Ÿæ˜¯è‡ªåŠ¨åŒ–ã€‚åªä¸è¿‡ä»–ä¸å±äºå·¥ç¨‹åŒ–ï¼Œåœ¨æœ¬ä¹¦çš„é™„å½•éƒ¨åˆ†ï¼Œæˆ‘ä¹Ÿä¼šæä¾›ä¸€äº›è‡ªåŠ¨åŒ–å°è„šæœ¬ã€‚

